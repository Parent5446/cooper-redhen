<html> <!--Front page for redhen spectra-->
    <head>
        <link rel='stylesheet' href='main.css'> <!--Link to stylesheet-->
        <link rel='shortcut icon' href='favicon.ico'> <!--Favicon for site-->
        <script language="JavaScript"> //Scripts for the page
            function init()
            { //Initialize all globals so as to avoid getElementById calls later
                loaded_list = document.getElementById('loaded_list');
                browse_options = document.getElementById('browse_options');
                browse_dialog = document.getElementById('browse_dialog');
                combobox_text = document.getElementById('combobox_text');
                combobox_dropdown = document.getElementById('combobox_dropdown');
                compare_options = document.getElementById('compare_options');
                graph = document.getElementById('graph');
                results = document.getElementById('results');
                file_frame = document.getElementById('file_frame');
                
                document.file_loaded = function(file)
                {
                    loaded_list.innerHTML += '<div>'+file+'</div>';
                }
            }
            function browse() //Browse button clicked
            {
                var selected = browse_options.options[browse_options.selectedIndex].value;
                browse_dialog.style.display = "block";
            }
            function done_browsing()
            {
                browse_dialog.style.display = "none";
                loaded_list.innerHTML += '<div>'+document.getElementById('combobox_text').value+'</div>';
                combobox_text.value = '';
                combobox_dropdown.style.display = 'none';
                combobox_dropdown.innerHTML = '';
            }
            function combobox_typed(key)
            {
                combobox_dropdown.innerHTML += '<div onclick="combobox_clicked(\''+combobox_text.value+'\')">'+combobox_text.value+'</div>';
                combobox_dropdown.style.display = 'block';
                var unicode = key.keyCode ? key.keyCode : key.charCode;
                if(unicode==13) done_browsing();
            }
            function combobox_clicked(text)
            {
                combobox_text.value = text;
                combobox_dropdown.style.display = 'none';
                combobox_text.focus();
            }
            function compare() //Compare button clicked
            {
                var selected = compare_options.options[compare_options.selectedIndex].value;
                loaded_list.style.display = 'none';
                graph.style.display = 'block';
                results.style.display = 'block';
                results.innerHTML = '<div style="margin:10px;">methanol<br>ethanol<br>propanol<br>butanol</div>';
                graph.innerHTML = "<img src='graph_mockup.png'>";
                document.body.style.padding = '0px';
                alert('Compare '+selected);
            }
            function browseChanged() //Make file upload frame go away when not selected
            {
                var selected = browse_options.options[browse_options.selectedIndex].value;
                if(selected == 'my computer') file_frame.style.display = "block";
                else file_frame.style.display = "none";
            }
        </script>
    </head>
    <body style='text-align:center; padding:40px;' onload='init()'> <!--Core HTML:-->
        <img src='banner.png'><!--Banner image-->
        
        <table style='margin:auto;'> <!--Layout table, holds site's pieces in order-->
        
        <tr><td rowspan='2'> <div id='graph' class='graph'></div> </td> <!--Graph of results-->   

        <td> <div class='frontpage-controls' id='controls'> <!--Main controls-->
            <table class='controls-table'>
                <tr>
                    <td><input type='button' id='browse_button' value='Browse' onclick='browse()' class='button'></td>
                    <td><select id='browse_options' class='listbox' onchange='browseChanged()'>
                        <option>my computer</option>
                        <option>my projects</option>
                        <option>main library</option>
                    </select></td>
                </tr>
                <tr>
                    <td><input type='button' value='Compare' onclick='compare()' class='button'></td>
                    <td><select id='compare_options' class='listbox'>
                        <option>to main library</option>
                        <option>to my projects</option>
                        <option>to each other</option>
                    </select></td>
                </tr>
            </table>
            
            <iframe class='invisible-frame' scrolling="no" id='file_frame' src='file_upload_frame.html'></iframe>
            
            <div class='browse-dialog' id='browse_dialog'> <!--Browse dialog, usually invisible-->
                Enter a chemical name to search:
                <input type='text' class='combobox-text' id='combobox_text' onkeyup='combobox_typed(event)'>
                <div class='combobox-dropdown' id='combobox_dropdown' onmouseover='document.body.style.cursor="pointer"' onmouseout='document.body.style.cursor="default"'></div>
                <input type='button' value='Done' onclick='done_browsing()'>
            </div>
        </div> </td></tr> <!--End of main controls-->
        
        <tr><td> <div id='results' class='results'></div> <!--List of results-->
        </td></tr> </table> <!--End of layout table-->
        
        <div id='loaded_list' class='loaded-list'></div> <!--List of loaded files-->
        
    </body>
</html>
